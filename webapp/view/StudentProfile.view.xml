<mvc:View
    controllerName="universitystudentlifecycle.controller.StudentProfile"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:u="sap.ui.unified"
    xmlns:form="sap.ui.layout.form"
    displayBlock="true">
    
    <Page id="studentProfilePage" 
          title="Student Profile" 
          showNavButton="true" 
          navButtonPress="onNavBack"
          enableScrolling="true">
        <customHeader>
            <Bar id="_IDGenBar">
                <contentMiddle>
                    <core:Fragment fragmentName="universitystudentlifecycle.view.fragment.GlobalHeader" type="XML"/>
                </contentMiddle>
                <contentRight>
                    <Button id="editButton" 
                            text="{= ${viewModel>/editMode} ? 'Cancel' : 'Edit'}" 
                            type="{= ${viewModel>/editMode} ? 'Reject' : 'Emphasized'}"
                            press="onToggleEditMode" 
                            visible="{= !${viewModel>/isSaving}}"/>
                    <Button id="saveButton" 
                            text="Save" 
                            type="Accept" 
                            press="onSaveProfile" 
                            visible="{viewModel>/editMode}"
                            enabled="{= !${viewModel>/isSaving}}"/>
                </contentRight>
            </Bar>

        </customHeader>
        
        
        
        <content>
            <ScrollContainer id="_IDGenScrollContainer" height="100%" width="100%" vertical="true" horizontal="false" class="sapUiResponsiveContentPadding">
                <l:Grid id="_IDGenGrid2" defaultSpan="XL6 L6 M12 S12" class="sapUiResponsiveMargin" hSpacing="1" vSpacing="1">
                    <!-- Personal Information Section -->
                    <Panel id="personalInfoSection" 
                           headerText="Personal Information" 
                           class="sapUiResponsiveMargin">
                        <content>
                            <form:SimpleForm id="personalInfoForm" 
                                            editable="{viewModel>/editMode}" 
                                            layout="ResponsiveGridLayout" 
                                            labelSpanXL="4" 
                                            labelSpanL="4" 
                                            labelSpanM="4" 
                                            labelSpanS="12" 
                                            adjustLabelSpan="false" 
                                            emptySpanXL="0" 
                                            emptySpanL="0" 
                                            emptySpanM="0" 
                                            emptySpanS="0" 
                                            columnsXL="2" 
                                            columnsL="2" 
                                            columnsM="2" 
                                            singleContainerFullSize="false">
                                
                                <form:content>
                                <VBox id="_IDGenVBox9" justifyContent="Center" alignItems="Center">
                                        <Avatar id="profileAvatar" 
                                               src="{studentProfile>/studentProfile/personalInfo/profilePhoto}"
                                               displaySize="L" 
                                               class="sapUiResponsiveMargin studentProfileAvatar"
                                               press="onProfilePhotoPress"
                                               customDisplaySize="120px"
                                               customFontSize="3rem"
                                               />
                                </VBox>
                                        <HBox id="_IDGenHBox" justifyContent="Center" alignItems="Center" width="100%">
                                            <Button id="uploadPhotoButton" 
                                                    text="Upload Photo" 
                                                    press="onUploadPhoto" 
                                                    visible="{viewModel>/editMode}"
                                                    icon="sap-icon://upload"
                                                    class="sapUiResponsiveMargin"/>
                                            
                                            <Button id="removePhotoButton" 
                                                    text="Remove" 
                                                    press="onRemovePhoto" 
                                                    visible="{= ${viewModel>/editMode} &amp;&amp; ${studentProfile>/studentProfile/personalInfo/profilePhoto} !== ''}"
                                                    type="Reject"
                                                    icon="sap-icon://delete"
                                                    class="sapUiResponsiveMargin"/>
                                        </HBox>
                                        <u:FileUploader id="fileUploader" 
                                                       name="profilePhoto" 
                                                       uploadUrl="upload/" 
                                                       tooltip="Upload your profile photo" 
                                                       uploadComplete="onUploadComplete" 
                                                       style="Emphasized" 
                                                       fileType="jpg,jpeg,png" 
                                                       placeholder="Choose a profile photo..." 
                                                       visible="false"
                                                       class="sapUiResponsiveMargin"/>
                                    <Label id="_IDGenLabel6" text="First Name" required="true"/>
                                    <Input id="_IDGenInput" value="{studentProfile>/studentProfile/personalInfo/firstName}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel7" text="Last Name" required="true"/>
                                    <Input id="_IDGenInput1" value="{studentProfile>/studentProfile/personalInfo/lastName}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel8" text="Date of Birth" required="true"/>
                                    <DatePicker id="_IDGenDatePicker" value="{studentProfile>/studentProfile/personalInfo/dateOfBirth}" 
                                               enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel9" text="Gender" required="true"/>
                                    <Select id="_IDGenSelect" selectedKey="{studentProfile>/studentProfile/personalInfo/gender}" 
                                            enabled="{viewModel>/editMode}">
                                        <core:Item id="_IDGenItem4" key="Male" text="Male"/>
                                        <core:Item id="_IDGenItem5" key="Female" text="Female"/>
                                        <core:Item id="_IDGenItem6" key="Other" text="Other"/>
                                    </Select>
                                    
                                    <Label id="_IDGenLabel10" text="Enrollment ID"/>
                                    <Text id="_IDGenText5" text="{studentProfile>/studentProfile/personalInfo/enrollmentId}"/>
                                    
                                    <Label id="_IDGenLabel11" text="Academic Year"/>
                                    <Text id="_IDGenText6" text="{studentProfile>/studentProfile/personalInfo/academicYear}"/>
                                    
                                    <Label id="_IDGenLabel12" text="Program"/>
                                    <Text id="_IDGenText7" text="{studentProfile>/studentProfile/personalInfo/program}"/>
                                    
                                    <Label id="_IDGenLabel13" text="Semester"/>
                                    <Text id="_IDGenText8" text="{studentProfile>/studentProfile/personalInfo/semester}"/>
                                    
                                    <Label id="_IDGenLabel14" text="GPA"/>
                                    <Text id="_IDGenText9" text="{studentProfile>/studentProfile/personalInfo/gpa}"/>
                                </form:content>
                            </form:SimpleForm>
                        </content>
                    </Panel>
                    
                    <!-- Contact Information Section -->
                    <Panel id="contactInfoSection" 
                           headerText="Contact Information" 
                           class="sapUiResponsiveMargin">
                        <content>
                            <form:SimpleForm id="contactInfoForm" 
                                            editable="{viewModel>/editMode}" 
                                            layout="ResponsiveGridLayout" 
                                            labelSpanXL="4" 
                                            labelSpanL="4" 
                                            labelSpanM="4" 
                                            labelSpanS="12" 
                                            adjustLabelSpan="false" 
                                            emptySpanXL="0" 
                                            emptySpanL="0" 
                                            emptySpanM="0" 
                                            emptySpanS="0" 
                                            columnsXL="2" 
                                            columnsL="2" 
                                            columnsM="2" 
                                            singleContainerFullSize="false">
                                
                                <form:content>
                                    <Label id="_IDGenLabel15" text="Email" required="true"/>
                                    <Input id="_IDGenInput2" value="{studentProfile>/studentProfile/contactInfo/email}" 
                                           type="Email"
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel16" text="Phone Number" required="true"/>
                                    <Input id="_IDGenInput3" value="{studentProfile>/studentProfile/contactInfo/phoneNumber}" 
                                           type="Tel"
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel17" text="Street Address"/>
                                    <Input id="_IDGenInput4" value="{studentProfile>/studentProfile/contactInfo/address/street}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel18" text="City"/>
                                    <Input id="_IDGenInput5" value="{studentProfile>/studentProfile/contactInfo/address/city}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel19" text="State/Province"/>
                                    <Input id="_IDGenInput6" value="{studentProfile>/studentProfile/contactInfo/address/state}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel20" text="ZIP/Postal Code"/>
                                    <Input id="_IDGenInput7" value="{studentProfile>/studentProfile/contactInfo/address/zipCode}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel21" text="Country"/>
                                    <Input id="_IDGenInput8" value="{studentProfile>/studentProfile/contactInfo/address/country}" 
                                           enabled="{viewModel>/editMode}"/>
                                </form:content>
                            </form:SimpleForm>
                        </content>
                    </Panel>
                    
                    <!-- Emergency Contact Section -->
                    <Panel id="emergencyContactSection" 
                           headerText="Emergency Contact" 
                           class="sapUiResponsiveMargin">
                        <content>
                            <form:SimpleForm id="emergencyContactForm" 
                                            editable="{viewModel>/editMode}" 
                                            layout="ResponsiveGridLayout" 
                                            labelSpanXL="4" 
                                            labelSpanL="4" 
                                            labelSpanM="4" 
                                            labelSpanS="12" 
                                            adjustLabelSpan="false" 
                                            emptySpanXL="0" 
                                            emptySpanL="0" 
                                            emptySpanM="0" 
                                            emptySpanS="0" 
                                            columnsXL="2" 
                                            columnsL="2" 
                                            columnsM="2" 
                                            singleContainerFullSize="false">
                                
                                <form:content>
                                    <Label id="_IDGenLabel22" text="Contact Name" required="true"/>
                                    <Input id="_IDGenInput9" value="{studentProfile>/studentProfile/emergencyContact/name}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel23" text="Relation" required="true"/>
                                    <Input id="_IDGenInput10" value="{studentProfile>/studentProfile/emergencyContact/relation}" 
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel24" text="Phone Number" required="true"/>
                                    <Input id="_IDGenInput11" value="{studentProfile>/studentProfile/emergencyContact/phoneNumber}" 
                                           type="Tel"
                                           enabled="{viewModel>/editMode}"/>
                                    
                                    <Label id="_IDGenLabel25" text="Email"/>
                                    <Input id="_IDGenInput12" value="{studentProfile>/studentProfile/emergencyContact/email}" 
                                           type="Email"
                                           enabled="{viewModel>/editMode}"/>
                                </form:content>
                            </form:SimpleForm>
                        </content>
                    </Panel>
                    
                </l:Grid>
            </ScrollContainer>
        </content>
        
        <!-- Busy Dialog -->
        <Dialog id="busyDialog" 
                title="Saving Profile" 
                type="Message" 
                state="Information" 
                visible="{viewModel>/isSaving}">
            <content>
                <BusyIndicator id="_IDGenBusyIndicator" size="2rem"/>
                <Text id="_IDGenText10" text="Please wait while we save your profile information..."/>
            </content>
        </Dialog>
        
        <!-- Image Preview Dialog -->
        <Dialog id="imagePreviewDialog" 
                title="Profile Photo Preview" 
                type="Standard"
                contentWidth="750px"
                contentHeight="550px"
                resizable="true"
                draggable="true">
            <content>
                <VBox id="_IDGenVBox10" alignItems="Center" justifyContent="Center" class="sapUiResponsiveContentPadding">
                    <Image id="previewImage" 
                           src="" 
                           width="80%" 
                           height="80%"
                           class="sapUiResponsiveMargin"/>
                </VBox>
            </content>
            <buttons>
                <Button id="_IDGenButton7" text="Close" 
                        press="onCloseImagePreview" 
                        type="Emphasized"/>
            </buttons>
        </Dialog>
        
    </Page>
</mvc:View>
